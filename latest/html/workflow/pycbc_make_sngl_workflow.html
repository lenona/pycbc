

<!DOCTYPE html>
<!--[if IE 8]><html class="no-js lt-ie9" lang="en" > <![endif]-->
<!--[if gt IE 8]><!--> <html class="no-js" lang="en" > <!--<![endif]-->
<head>
  <meta charset="utf-8">
  
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  
  <title>pycbc_make_sngl_workflow: A single-ifo detchar workflow generator &mdash; PyCBC 0.1 documentation</title>
  

  
  

  

  
  
    

  

  
  
    <link rel="stylesheet" href="../_static/css/theme.css" type="text/css" />
  

  

  
    <link rel="top" title="PyCBC 0.1 documentation" href="../index.html"/>
        <link rel="next" title="pycbc_make_offline_grb_workflow: A GRB triggered CBC analysis workflow generator" href="pygrb.html"/>
        <link rel="prev" title="pycbc_make_coinc_search_workflow: A workflow to search for gravitational waves" href="pycbc_make_coinc_search_workflow.html"/> 

  
  <script src="../_static/js/modernizr.min.js"></script>

</head>

<body class="wy-body-for-nav" role="document">

  <div class="wy-grid-for-nav">

    
    <nav data-toggle="wy-nav-shift" class="wy-nav-side">
      <div class="wy-side-scroll">
        <div class="wy-side-nav-search">
          

          
            <a href="../index.html" class="icon icon-home"> PyCBC
          

          
          </a>

          
            
            
              <div class="version">
                1.2
              </div>
            
          

          
<div role="search">
  <form id="rtd-search-form" class="wy-form" action="../search.html" method="get">
    <input type="text" name="q" placeholder="Search docs" />
    <input type="hidden" name="check_keywords" value="yes" />
    <input type="hidden" name="area" value="default" />
  </form>
</div>

          
        </div>

        <div class="wy-menu wy-menu-vertical" data-spy="affix" role="navigation" aria-label="main navigation">
          
            
            
                <ul>
<li class="toctree-l1"><a class="reference internal" href="../install.html">Installing PyCBC</a></li>
</ul>
<ul class="current">
<li class="toctree-l1"><a class="reference internal" href="pycbc_make_psd_estimation_workflow.html"><code class="docutils literal"><span class="pre">pycbc_make_psd_estimation_workflow</span></code>: A workflow generator for noise estimation</a></li>
<li class="toctree-l1"><a class="reference internal" href="pycbc_make_coinc_search_workflow.html"><code class="docutils literal"><span class="pre">pycbc_make_coinc_search_workflow</span></code>: A workflow to search for gravitational waves</a></li>
<li class="toctree-l1 current"><a class="current reference internal" href=""><code class="docutils literal"><span class="pre">pycbc_make_sngl_workflow</span></code>: A single-ifo detchar workflow generator</a><ul>
<li class="toctree-l2"><a class="reference internal" href="#introduction">Introduction</a></li>
<li class="toctree-l2"><a class="reference internal" href="#configuration-file">Configuration file</a><ul>
<li class="toctree-l3"><a class="reference internal" href="#the-configuration-file-do-you-already-have-configuration-ini-file-s">The configuration file - Do you already have configuration (.ini) file(s)?</a><ul>
<li class="toctree-l4"><a class="reference internal" href="#yes-i-already-have-my-own-local-config-files">Yes, I already have my own local config files</a></li>
<li class="toctree-l4"><a class="reference internal" href="#yes-i-would-like-to-use-the-unmodified-preinstalled-configuration-files">Yes, I would like to use the unmodified preinstalled configuration files</a></li>
<li class="toctree-l4"><a class="reference internal" href="#no-i-need-to-make-a-configuration-file-editing-the-example-files">No, I need to make a configuration file - Editing the example files</a></li>
</ul>
</li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="#generate-the-workflow">Generate the workflow</a></li>
<li class="toctree-l2"><a class="reference internal" href="#planning-and-submitting-the-workflow">Planning and submitting the workflow</a><ul>
<li class="toctree-l3"><a class="reference internal" href="#monitor-and-debug-the-workflow">Monitor and Debug the Workflow</a></li>
</ul>
</li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="pygrb.html"><code class="docutils literal"><span class="pre">pycbc_make_offline_grb_workflow</span></code>: A GRB triggered CBC analysis workflow generator</a></li>
</ul>
<ul>
<li class="toctree-l1"><a class="reference internal" href="../tmpltbank.html">PyCBC template bank generation documentation (<code class="docutils literal"><span class="pre">pycbc.tmpltbank</span></code>)</a></li>
<li class="toctree-l1"><a class="reference internal" href="../hwinj.html">Hardware injection waveform generation</a></li>
<li class="toctree-l1"><a class="reference internal" href="../banksim.html">Calculating the Effectualness (Fitting Factor) of Template Banks</a></li>
<li class="toctree-l1"><a class="reference internal" href="../faithsim.html">Dag Generator for Doing Faithfulness Comparisons</a></li>
<li class="toctree-l1"><a class="reference internal" href="../upload_to_gracedb.html">Uploading triggers to gracedb</a></li>
</ul>
<ul>
<li class="toctree-l1"><a class="reference internal" href="../waveform.html">Waveforms</a></li>
</ul>
<ul>
<li class="toctree-l1"><a class="reference internal" href="../documentation.html">Documenting PyCBC code</a></li>
<li class="toctree-l1"><a class="reference internal" href="../release.html">Creating Releases of PyCBC</a></li>
</ul>
<ul>
<li class="toctree-l1"><a class="reference internal" href="../frame.html">Reading Gravitational-wave Frames (<code class="docutils literal"><span class="pre">pycbc.frame</span></code>)</a></li>
<li class="toctree-l1"><a class="reference internal" href="../formats/hdf_format.html">HDF files within the PyCBC workflow</a></li>
</ul>
<ul>
<li class="toctree-l1"><a class="reference internal" href="../workflow.html">Workflow: the inspiral analysis workflow generator (<code class="docutils literal"><span class="pre">pycbc.workflow</span></code>)</a></li>
</ul>
<ul>
<li class="toctree-l1"><a class="reference internal" href="../modules.html">pycbc</a></li>
</ul>

            
          
        </div>
      </div>
    </nav>

    <section data-toggle="wy-nav-shift" class="wy-nav-content-wrap">

      
      <nav class="wy-nav-top" role="navigation" aria-label="top navigation">
        <i data-toggle="wy-nav-top" class="fa fa-bars"></i>
        <a href="../index.html">PyCBC</a>
      </nav>


      
      <div class="wy-nav-content">
        <div class="rst-content">
          





<div role="navigation" aria-label="breadcrumbs navigation">
  <ul class="wy-breadcrumbs">
    <li><a href="../index.html">Docs</a> &raquo;</li>
      
    <li><code class="docutils literal"><span class="pre">pycbc_make_sngl_workflow</span></code>: A single-ifo detchar workflow generator</li>
      <li class="wy-breadcrumbs-aside">
        
          
            <a href="../_sources/workflow/pycbc_make_sngl_workflow.txt" rel="nofollow"> View page source</a>
          
        
      </li>
  </ul>
  <hr/>
</div>
          <div role="main" class="document" itemscope="itemscope" itemtype="http://schema.org/Article">
           <div itemprop="articleBody">
            
  <div class="section" id="pycbc-make-sngl-workflow-a-single-ifo-detchar-workflow-generator">
<h1><code class="docutils literal"><span class="pre">pycbc_make_sngl_workflow</span></code>: A single-ifo detchar workflow generator<a class="headerlink" href="#pycbc-make-sngl-workflow-a-single-ifo-detchar-workflow-generator" title="Permalink to this headline">¶</a></h1>
<div class="section" id="introduction">
<h2>Introduction<a class="headerlink" href="#introduction" title="Permalink to this headline">¶</a></h2>
<p>The executable <code class="docutils literal"><span class="pre">pycbc_make_sngl_workflow</span></code> is a tool used to analyse data
from single detector(s), with no coincidence stage. The output from this single
detector matched-filter runs can be used to identify times where the detectors
are producing glitches that have a large single-detector detection statistic
for the CBC searches. If the detectoralists can identify what causes these most
egregious glitches it can increase the overall search sensitivity.</p>
</div>
<div class="section" id="configuration-file">
<h2>Configuration file<a class="headerlink" href="#configuration-file" title="Permalink to this headline">¶</a></h2>
<div class="section" id="the-configuration-file-do-you-already-have-configuration-ini-file-s">
<h3>The configuration file - Do you already have configuration (.ini) file(s)?<a class="headerlink" href="#the-configuration-file-do-you-already-have-configuration-ini-file-s" title="Permalink to this headline">¶</a></h3>
<div class="section" id="yes-i-already-have-my-own-local-config-files">
<h4>Yes, I already have my own local config files<a class="headerlink" href="#yes-i-already-have-my-own-local-config-files" title="Permalink to this headline">¶</a></h4>
<p>Great! Then copy the configuration files into your run directory:</p>
<div class="highlight-python"><div class="highlight"><pre>cp /path/to/config_file1.ini /path/to/config_file2.ini .
</pre></div>
</div>
<p>and set the names of these configuration files in your path. If you have more than one configuration file they must be space separated:</p>
<div class="highlight-python"><div class="highlight"><pre><span class="n">LOCAL_CONFIG_FILES</span><span class="o">=</span><span class="s">&quot;config_file1.ini config_file2.ini&quot;</span>
</pre></div>
</div>
<p>Now go down to <a class="reference internal" href="#pycbcdailygenerate"><span>Generate the workflow</span></a>.</p>
</div>
<div class="section" id="yes-i-would-like-to-use-the-unmodified-preinstalled-configuration-files">
<h4>Yes, I would like to use the unmodified preinstalled configuration files<a class="headerlink" href="#yes-i-would-like-to-use-the-unmodified-preinstalled-configuration-files" title="Permalink to this headline">¶</a></h4>
<p>Set the configurations files in your path and proceed to workflow generation:</p>
<div class="highlight-python"><div class="highlight"><pre><span class="n">INSTALLED_CONFIG_FILES</span><span class="o">=</span><span class="s">&quot;sngl/example_sngl.ini&quot;</span>
</pre></div>
</div>
<p>Now go down to <a class="reference internal" href="#pycbcdailygenerate"><span>Generate the workflow</span></a>.</p>
</div>
<div class="section" id="no-i-need-to-make-a-configuration-file-editing-the-example-files">
<h4>No, I need to make a configuration file - Editing the example files<a class="headerlink" href="#no-i-need-to-make-a-configuration-file-editing-the-example-files" title="Permalink to this headline">¶</a></h4>
<p>An example configuration file set is found here:</p>
<div class="highlight-python"><div class="highlight"><pre>/src/dir/pycbc/workflow/ini_files/sngl/example_sngl.ini
</pre></div>
</div>
<p>This file contains all the details needed to run <code class="docutils literal"><span class="pre">pycbc_make_sngl_workflow</span></code></p>
<div class="admonition note">
<p class="first admonition-title">Note</p>
<p class="last">If you are unfamiliar with pycbc workflows, look through these files.
example_daily_lalapps.ini will look familiar if you are used to daily ihope workflows.</p>
</div>
<p>The <code class="docutils literal"><span class="pre">example_sngl.ini</span></code> example is set up to run on S6 data and analysing only H1 and L1.</p>
<p>If you want to run in this default configuration please jump down the &#8220;Generate the workflow&#8221;.</p>
<p>If you want to analyse a different set of ifos, you will have to edit some additional options:</p>
<div class="highlight-python"><div class="highlight"><pre>[workflow]
h1-channel-name = H1:GDS-FAKE_STRAIN
l1-channel-name = L1:OAF-CAL_DARM_DQ

[workflow-ifos]
; This is the list of ifos to analyse
h1 =
l1 =

[workflow-datafind]
datafind-h1-frame-type = H1_ER_C00_AGG
datafind-l1-frame-type = L1_R

[workflow-segments]
segments-h1-science-name = H1:DMT-SCIENCE:1
segments-l1-science-name = L1:DMT-ANALYSIS_READY:1
segments-database-url = https://dqsegdb5.phy.syr.edu
segments-veto-definer-url = https://www.lsc-group.phys.uwm.edu/ligovirgo/cbc/public/segments/ER6/H1L1V1-ER6_CBC_OAF_CAL_DARM_DQ.xml
</pre></div>
</div>
<p>To run through this</p>
<ul class="simple">
<li>The <code class="docutils literal"><span class="pre">[workflow-ifos]</span></code> section supplies which ifos will be analysed if data is found and available.</li>
<li>The <code class="docutils literal"><span class="pre">x1-channel-name</span></code> options are the h(t) channel name in the frames.</li>
<li>The <code class="docutils literal"><span class="pre">datafind-x1-frame-type</span></code> options are the type of the frames for use when calling <code class="docutils literal"><span class="pre">gw_data_find</span></code>.</li>
<li>The <code class="docutils literal"><span class="pre">segments-x1-science-name</span></code> options are the flag used to store science times in the segment database.</li>
<li>The <code class="docutils literal"><span class="pre">segments-database-url</span></code> option points to the segment database.</li>
<li>The <code class="docutils literal"><span class="pre">segments-veto-definer-url</span></code> option points to the url where the veto-definer file can be found.</li>
</ul>
<p>The remaining options affect how the jobs run, these should not be edited unless you know what you are doing. To find out more details about the possible options for any stage of the workflow, follow the links at <a class="reference internal" href="../workflow.html#workflowhomepage"><span>Workflow: the inspiral analysis workflow generator (pycbc.workflow)</span></a>.</p>
<p>Now you have configuration files and can follow the same instructions as above. That is:</p>
<p>Copy the configuration files into your run directory:</p>
<div class="highlight-python"><div class="highlight"><pre>cp /path/to/example_sngl.ini .
</pre></div>
</div>
<p>and set the names of these configuration files in your path. If you have more than one configuration file they must be space separated:</p>
<div class="highlight-python"><div class="highlight"><pre><span class="n">LOCAL_CONFIG_FILES</span><span class="o">=</span><span class="s">&quot;example_sngl.ini&quot;</span>
</pre></div>
</div>
</div>
</div>
</div>
<div class="section" id="generate-the-workflow">
<span id="pycbcdailygenerate"></span><h2>Generate the workflow<a class="headerlink" href="#generate-the-workflow" title="Permalink to this headline">¶</a></h2>
<p>When you are ready, you can generate the workflow. First we need to choose a start time. Here is an example:</p>
<div class="highlight-python"><div class="highlight"><pre>export GPS_START_TIME=1102089616
export GPS_END_TIME=1102100616
</pre></div>
</div>
<p>Choose a name for the workflow. For example use the GPS times:</p>
<div class="highlight-python"><div class="highlight"><pre>export WORKFLOW_NAME=${GPS_START_TIME}-${GPS_END_TIME}
</pre></div>
</div>
<p>You also need to specify the directory for storing log files.</p>
<blockquote>
<div><ul>
<li><p class="first">For CIT,LHO,LLO or SYR set:</p>
<div class="highlight-python"><div class="highlight"><pre>export LOGPATH=/usr1/${USER}/log
mkdir -p $LOGPATH
</pre></div>
</div>
</li>
<li><p class="first">For Atlas set:</p>
<div class="highlight-python"><div class="highlight"><pre>export LOGPATH=/local/user/${USER}/log/
mkdir -p $LOGPATH
</pre></div>
</div>
</li>
<li><p class="first">For UWM set:</p>
<div class="highlight-python"><div class="highlight"><pre>export LOGPATH=/people/${USER}/log/
mkdir -p $LOGPATH
</pre></div>
</div>
</li>
</ul>
</div></blockquote>
<p>You also need to choose where the html page will be generated. For example:</p>
<div class="highlight-python"><div class="highlight"><pre>export HTMLDIR=/home/${USER}/public_html/pycbc_sngl/${WORKFLOW_NAME}
</pre></div>
</div>
<p>You also need to tell the html page generation code how to link the static pages. For example:</p>
<div class="highlight-python"><div class="highlight"><pre>export HTMLLINK=/~${USER}/pycbc_sngl/${WORKFLOW_NAME}
</pre></div>
</div>
<p>If you are using locally edited or custom configuration files then you can
create the workflow using:</p>
<div class="highlight-python"><div class="highlight"><pre>pycbc_make_sngl_workflow --name ${WORKFLOW_NAME} \
                         --config-files ${INSTALLED_CONFIG_FILES} \
                         --config-overrides workflow:start-time:${GPS_START_TIME} \
                                            workflow:end-time:${GPS_END_TIME} \
                                            workflow:workflow-html-basedir:${HTMLDIR} \
                                            workflow:workflow-html-link:${HTMLLINK} \
                                            html:analysis-subtitle:${GPS_START_TIME}-${GPS_END_TIME}
</pre></div>
</div>
</div>
<div class="section" id="planning-and-submitting-the-workflow">
<span id="weeklyahopeplan"></span><h2>Planning and submitting the workflow<a class="headerlink" href="#planning-and-submitting-the-workflow" title="Permalink to this headline">¶</a></h2>
<p>Change directory into the directory where the dax was generated:</p>
<div class="highlight-python"><div class="highlight"><pre>cd ${MONTHDIR}/${DAYDIR}/
</pre></div>
</div>
<p>From the directory where the dax was created, run the planning script:</p>
<div class="highlight-python"><div class="highlight"><pre>pycbc_submit_dax --dax daily_ahope.dax
</pre></div>
</div>
<p>This will plan an begin running the workflow.</p>
<div class="section" id="monitor-and-debug-the-workflow">
<h3>Monitor and Debug the Workflow<a class="headerlink" href="#monitor-and-debug-the-workflow" title="Permalink to this headline">¶</a></h3>
<p>To monitor the above workflow, one would run:</p>
<div class="highlight-python"><div class="highlight"><pre>pegasus-status /usr1/${USER}/log/${USER}/pegasus/daily_ahope/run0011
</pre></div>
</div>
<p>To get debugging information in the case of failures:</p>
<div class="highlight-python"><div class="highlight"><pre>pegasus-analyzer /usr1/${USER}/log/${USER}/pegasus/daily_ahope/run0011
</pre></div>
</div>
</div>
</div>
</div>


           </div>
          </div>
          <footer>
  
    <div class="rst-footer-buttons" role="navigation" aria-label="footer navigation">
      
        <a href="pygrb.html" class="btn btn-neutral float-right" title="pycbc_make_offline_grb_workflow: A GRB triggered CBC analysis workflow generator" accesskey="n">Next <span class="fa fa-arrow-circle-right"></span></a>
      
      
        <a href="pycbc_make_coinc_search_workflow.html" class="btn btn-neutral" title="pycbc_make_coinc_search_workflow: A workflow to search for gravitational waves" accesskey="p"><span class="fa fa-arrow-circle-left"></span> Previous</a>
      
    </div>
  

  <hr/>

  <div role="contentinfo">
    <p>
        &copy; Copyright 2014, Alexander Nitz.
      Last updated on Apr 12, 2016.

    </p>
  </div>
  Built with <a href="http://sphinx-doc.org/">Sphinx</a> using a <a href="https://github.com/snide/sphinx_rtd_theme">theme</a> provided by <a href="https://readthedocs.org">Read the Docs</a>. 

</footer>

        </div>
      </div>

    </section>

  </div>
  


  

    <script type="text/javascript">
        var DOCUMENTATION_OPTIONS = {
            URL_ROOT:'../',
            VERSION:'0.1',
            COLLAPSE_INDEX:false,
            FILE_SUFFIX:'.html',
            HAS_SOURCE:  true
        };
    </script>
      <script type="text/javascript" src="../_static/jquery.js"></script>
      <script type="text/javascript" src="../_static/underscore.js"></script>
      <script type="text/javascript" src="../_static/doctools.js"></script>

  

  
  
    <script type="text/javascript" src="../_static/js/theme.js"></script>
  

  
  
  <script type="text/javascript">
      jQuery(function () {
          SphinxRtdTheme.StickyNav.enable();
      });
  </script>
   

</body>
</html>