

<!DOCTYPE html>
<!--[if IE 8]><html class="no-js lt-ie9" lang="en" > <![endif]-->
<!--[if gt IE 8]><!--> <html class="no-js" lang="en" > <!--<![endif]-->
<head>
  <meta charset="utf-8">
  
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  
  <title>The workflow postprocessing module &mdash; PyCBC 0.1 documentation</title>
  

  
  

  

  
  
    

  

  
  
    <link rel="stylesheet" href="../_static/css/theme.css" type="text/css" />
  

  

  
    <link rel="top" title="PyCBC 0.1 documentation" href="../index.html"/>
        <link rel="up" title="Workflow: the inspiral analysis workflow generator (pycbc.workflow)" href="../workflow.html"/>
        <link rel="next" title="pycbc.workflow package" href="../pycbc.workflow.html"/>
        <link rel="prev" title="The workflow postprocessing preparation module" href="postprocprep.html"/> 

  
  <script src="../_static/js/modernizr.min.js"></script>

</head>

<body class="wy-body-for-nav" role="document">

  <div class="wy-grid-for-nav">

    
    <nav data-toggle="wy-nav-shift" class="wy-nav-side">
      <div class="wy-side-scroll">
        <div class="wy-side-nav-search">
          

          
            <a href="../index.html" class="icon icon-home"> PyCBC
          

          
          </a>

          
            
            
              <div class="version">
                1.2
              </div>
            
          

          
<div role="search">
  <form id="rtd-search-form" class="wy-form" action="../search.html" method="get">
    <input type="text" name="q" placeholder="Search docs" />
    <input type="hidden" name="check_keywords" value="yes" />
    <input type="hidden" name="area" value="default" />
  </form>
</div>

          
        </div>

        <div class="wy-menu wy-menu-vertical" data-spy="affix" role="navigation" aria-label="main navigation">
          
            
            
                <ul>
<li class="toctree-l1"><a class="reference internal" href="../install.html">Installing PyCBC</a></li>
</ul>
<ul>
<li class="toctree-l1"><a class="reference internal" href="pycbc_make_psd_estimation_workflow.html"><code class="docutils literal"><span class="pre">pycbc_make_psd_estimation_workflow</span></code>: A workflow generator for noise estimation</a></li>
<li class="toctree-l1"><a class="reference internal" href="pycbc_make_coinc_search_workflow.html"><code class="docutils literal"><span class="pre">pycbc_make_coinc_search_workflow</span></code>: A workflow to search for gravitational waves</a></li>
<li class="toctree-l1"><a class="reference internal" href="pycbc_make_sngl_workflow.html"><code class="docutils literal"><span class="pre">pycbc_make_sngl_workflow</span></code>: A single-ifo detchar workflow generator</a></li>
<li class="toctree-l1"><a class="reference internal" href="pygrb.html"><code class="docutils literal"><span class="pre">pycbc_make_offline_grb_workflow</span></code>: A GRB triggered CBC analysis workflow generator</a></li>
</ul>
<ul>
<li class="toctree-l1"><a class="reference internal" href="../tmpltbank.html">PyCBC template bank generation documentation (<code class="docutils literal"><span class="pre">pycbc.tmpltbank</span></code>)</a></li>
<li class="toctree-l1"><a class="reference internal" href="../hwinj.html">Hardware injection waveform generation</a></li>
<li class="toctree-l1"><a class="reference internal" href="../banksim.html">Calculating the Effectualness (Fitting Factor) of Template Banks</a></li>
<li class="toctree-l1"><a class="reference internal" href="../faithsim.html">Dag Generator for Doing Faithfulness Comparisons</a></li>
<li class="toctree-l1"><a class="reference internal" href="../upload_to_gracedb.html">Uploading triggers to gracedb</a></li>
</ul>
<ul>
<li class="toctree-l1"><a class="reference internal" href="../waveform.html">Waveforms</a></li>
</ul>
<ul>
<li class="toctree-l1"><a class="reference internal" href="../documentation.html">Documenting PyCBC code</a></li>
<li class="toctree-l1"><a class="reference internal" href="../release.html">Creating Releases of PyCBC</a></li>
</ul>
<ul>
<li class="toctree-l1"><a class="reference internal" href="../frame.html">Reading Gravitational-wave Frames (<code class="docutils literal"><span class="pre">pycbc.frame</span></code>)</a></li>
<li class="toctree-l1"><a class="reference internal" href="../formats/hdf_format.html">HDF files within the PyCBC workflow</a></li>
</ul>
<ul class="current">
<li class="toctree-l1 current"><a class="reference internal" href="../workflow.html">Workflow: the inspiral analysis workflow generator (<code class="docutils literal"><span class="pre">pycbc.workflow</span></code>)</a><ul class="current">
<li class="toctree-l2"><a class="reference internal" href="../workflow.html#introduction">Introduction</a></li>
<li class="toctree-l2 current"><a class="reference internal" href="../workflow.html#workflow-module-documentation">Workflow module documentation</a><ul class="current">
<li class="toctree-l3"><a class="reference internal" href="../workflow.html#initialization">Initialization</a></li>
<li class="toctree-l3"><a class="reference internal" href="../workflow.html#generating-segments">Generating segments</a></li>
<li class="toctree-l3"><a class="reference internal" href="../workflow.html#obtaining-data">Obtaining data</a></li>
<li class="toctree-l3"><a class="reference internal" href="../workflow.html#injection-generation">Injection generation</a></li>
<li class="toctree-l3"><a class="reference internal" href="../workflow.html#time-slide-generation">Time-slide generation</a></li>
<li class="toctree-l3"><a class="reference internal" href="../workflow.html#template-bank">Template bank</a></li>
<li class="toctree-l3"><a class="reference internal" href="../workflow.html#split-table">Split table</a></li>
<li class="toctree-l3"><a class="reference internal" href="../workflow.html#matched-filtering">Matched-filtering</a></li>
<li class="toctree-l3"><a class="reference internal" href="../workflow.html#coincidence">Coincidence</a></li>
<li class="toctree-l3"><a class="reference internal" href="../workflow.html#post-processing-preparation">Post processing preparation</a></li>
<li class="toctree-l3 current"><a class="reference internal" href="../workflow.html#post-processing">Post-processing</a><ul class="current">
<li class="toctree-l4 current"><a class="current reference internal" href="">The workflow postprocessing module</a></li>
</ul>
</li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="../workflow.html#method-documentation">Method documentation</a></li>
</ul>
</li>
</ul>
<ul>
<li class="toctree-l1"><a class="reference internal" href="../modules.html">pycbc</a></li>
</ul>

            
          
        </div>
      </div>
    </nav>

    <section data-toggle="wy-nav-shift" class="wy-nav-content-wrap">

      
      <nav class="wy-nav-top" role="navigation" aria-label="top navigation">
        <i data-toggle="wy-nav-top" class="fa fa-bars"></i>
        <a href="../index.html">PyCBC</a>
      </nav>


      
      <div class="wy-nav-content">
        <div class="rst-content">
          





<div role="navigation" aria-label="breadcrumbs navigation">
  <ul class="wy-breadcrumbs">
    <li><a href="../index.html">Docs</a> &raquo;</li>
      
          <li><a href="../workflow.html">Workflow: the inspiral analysis workflow generator (<code class="docutils literal"><span class="pre">pycbc.workflow</span></code>)</a> &raquo;</li>
      
    <li>The workflow postprocessing module</li>
      <li class="wy-breadcrumbs-aside">
        
          
            <a href="../_sources/workflow/postproc.txt" rel="nofollow"> View page source</a>
          
        
      </li>
  </ul>
  <hr/>
</div>
          <div role="main" class="document" itemscope="itemscope" itemtype="http://schema.org/Article">
           <div itemprop="articleBody">
            
  <div class="section" id="the-workflow-postprocessing-module">
<span id="workflowpostprocmod"></span><h1>The workflow postprocessing module<a class="headerlink" href="#the-workflow-postprocessing-module" title="Permalink to this headline">¶</a></h1>
<div class="section" id="introduction">
<h2>Introduction<a class="headerlink" href="#introduction" title="Permalink to this headline">¶</a></h2>
<p>The postprocessing sub-module of the pycbc workflow module is used to assess the significance of all triggers identified at earlier stages of the pipeline and to compute any rate statements that can be made from the analysis results.</p>
<p>The return from this module is a list of pycbc workflow File objects corresponding to the files containing the trigger significances and rate statements.</p>
</div>
<div class="section" id="usage">
<h2>Usage<a class="headerlink" href="#usage" title="Permalink to this headline">¶</a></h2>
<p>Using this module requires a number of things</p>
<ul class="simple">
<li>A configuration file (or files) containing the information needed to tell this module how to do the postprocessing preparation.</li>
<li>An initialized instance of the pycbc Workflow class, containing the ConfigParser.</li>
<li>A FileList containing the analysis results.</li>
</ul>
<p>This module is then called according to</p>
<div class="section" id="configuration-file-setup">
<h3>Configuration file setup<a class="headerlink" href="#configuration-file-setup" title="Permalink to this headline">¶</a></h3>
<p>Here we describe the options given in the configuration file used in the
workflow that will be needed in this section</p>
<div class="section" id="workflow-postproc-section">
<h4>[workflow-postproc] section<a class="headerlink" href="#workflow-postproc-section" title="Permalink to this headline">¶</a></h4>
<p>The configuration file must have an [workflow-postproc] section, which is used to provide instructions to the workflow module on how to set up the post-processinge stage. The first option to choose and provide is</p>
<ul class="simple">
<li>postproc-method = VALUE</li>
</ul>
<p>The choices here and their description are as described below</p>
<ul class="simple">
<li>PIPEDOWN_WORKFLOW - This will perform pipedown style post-processing, using the same methods as was used by pipedown to assess trigger significance and compute rate statements (currently rate statements are not calculated)</li>
</ul>
<p>Currently only one option, but others can be added. The subfunctions used are described here</p>
<p>With the PIPEDOWN_WORKFLOW method the following options apply</p>
<ul class="simple">
<li>postproc-computedurations-exe=NAME</li>
<li>postproc-cfar-exe=NAME</li>
</ul>
<p>these specify which executables will be used for each step. These are described more fully below.</p>
</div>
<div class="section" id="executables">
<h4>[executables]<a class="headerlink" href="#executables" title="Permalink to this headline">¶</a></h4>
<p>Executables required by this module are provided in the [executables] section. Any executable names specified in the [workflow-postproc] section must appear here. For instance if the [workflow-postproc] section reads</p>
<ul class="simple">
<li>postproc-computedurations-exe=computedurs</li>
<li>postproc-cfar-exe=pycbccfar</li>
</ul>
<p>you would need to have</p>
<ul class="simple">
<li>computedurs = ${which:pycbc_compute_durations}</li>
<li>pycbccfar = ${which:pycbc_calculate_far}</li>
</ul>
<p>in the [executables] section.</p>
<p>Sections, in this case [computedurs] and [pycbccfar], will be used to specify the constant command line options that are sent to all jobs with the corresponding exe name. How to set up the [{exe_name}] section, and which executables are currently supported is discussed below.</p>
</div>
</div>
<div class="section" id="supported-post-processing-codes-and-instructions-for-using-them">
<h3>Supported post-processing codes and instructions for using them<a class="headerlink" href="#supported-post-processing-codes-and-instructions-for-using-them" title="Permalink to this headline">¶</a></h3>
<p>The following coincidence codes are currently supported in the workflow module</p>
<div class="section" id="postproc-computedurations-exe">
<h4>postproc-computedurations-exe<a class="headerlink" href="#postproc-computedurations-exe" title="Permalink to this headline">¶</a></h4>
<ul class="simple">
<li>pycbc_compute_durations</li>
</ul>
</div>
<div class="section" id="postproc-cfar-exe">
<h4>postproc-cfar-exe<a class="headerlink" href="#postproc-cfar-exe" title="Permalink to this headline">¶</a></h4>
<ul class="simple">
<li>pycbc_calculate_far</li>
</ul>
</div>
</div>
<div class="section" id="instructions-for-each-code">
<h3>Instructions for each code<a class="headerlink" href="#instructions-for-each-code" title="Permalink to this headline">¶</a></h3>
<p>Adding a new executable is not too hard, please ask a developer for some pointers on how to do this if you want to add a new code. This may require a new method if the new code uses a different method of generaring coincidences or time sliding.</p>
<p>The instructions for currently supported codes is given below</p>
<div class="section" id="pycbc-compute-durations">
<h4>pycbc_compute_durations<a class="headerlink" href="#pycbc-compute-durations" title="Permalink to this headline">¶</a></h4>
<p>This code is responsible for determining how how time was analysed, in coincidence, and after vetoes have been applied. This is then needed to assess the false alarm rates.</p>
<div class="highlight-text"><div class="highlight"><pre>$ pycbc_compute_durations --help
No module named lal
Traceback (most recent call last):
  File &quot;/home/amber.lenon/pycbc-dev/bin/pycbc_compute_durations&quot;, line 4, in &lt;module&gt;
    __import__(&#39;pkg_resources&#39;).run_script(&#39;PyCBC==676417&#39;, &#39;pycbc_compute_durations&#39;)
  File &quot;/home/amber.lenon/pycbc-dev/lib/python2.6/site-packages/pkg_resources/__init__.py&quot;, line 735, in run_script
    self.require(requires)[0].run_script(script_name, ns)
  File &quot;/home/amber.lenon/pycbc-dev/lib/python2.6/site-packages/pkg_resources/__init__.py&quot;, line 1652, in run_script
    exec(code, namespace, namespace)
  File &quot;/home/amber.lenon/pycbc-dev/lib/python2.6/site-packages/PyCBC-676417-py2.6.egg/EGG-INFO/scripts/pycbc_compute_durations&quot;, line 14, in &lt;module&gt;
    from pycbc import workflow
  File &quot;/home/amber.lenon/pycbc-dev/lib/python2.6/site-packages/PyCBC-676417-py2.6.egg/pycbc/workflow/__init__.py&quot;, line 32, in &lt;module&gt;
    from pycbc.workflow.core import *
  File &quot;/home/amber.lenon/pycbc-dev/lib/python2.6/site-packages/PyCBC-676417-py2.6.egg/pycbc/workflow/core.py&quot;, line 33, in &lt;module&gt;
    import lal as lalswig
ImportError: No module named lal
</pre></div>
</div>
<p>Of these options the workflow module will automatically add the following, which are unique for each job. <strong>DO NOT ADD THESE OPTIONS IN THE CONFIGURATION FILE</strong>.</p>
<ul class="simple">
<li>&#8211;input</li>
<li>&#8211;output</li>
</ul>
</div>
<div class="section" id="pycbc-calculate-far">
<h4>pycbc_calculate_far<a class="headerlink" href="#pycbc-calculate-far" title="Permalink to this headline">¶</a></h4>
<p>This code will calculate the false alarm rate associated with each trigger. It will calculate an &#8220;uncombined&#8221; false alarm rate, for each triggers mass bin and coincidence type, and a &#8220;combined&#8221; false alarm rate, after trials factor from the number of mass bins * coincident types has been accounted for.</p>
<div class="highlight-text"><div class="highlight"><pre>$ pycbc_calculate_far --help
Traceback (most recent call last):
  File &quot;/home/amber.lenon/pycbc-dev/bin/pycbc_calculate_far&quot;, line 4, in &lt;module&gt;
    __import__(&#39;pkg_resources&#39;).run_script(&#39;PyCBC==676417&#39;, &#39;pycbc_calculate_far&#39;)
  File &quot;/home/amber.lenon/pycbc-dev/lib/python2.6/site-packages/pkg_resources/__init__.py&quot;, line 735, in run_script
    self.require(requires)[0].run_script(script_name, ns)
  File &quot;/home/amber.lenon/pycbc-dev/lib/python2.6/site-packages/pkg_resources/__init__.py&quot;, line 1652, in run_script
    exec(code, namespace, namespace)
  File &quot;/home/amber.lenon/pycbc-dev/lib/python2.6/site-packages/PyCBC-676417-py2.6.egg/EGG-INFO/scripts/pycbc_calculate_far&quot;, line 16, in &lt;module&gt;
    from pylal import ligolw_sqlutils as sqlutils
  File &quot;/home/amber.lenon/pycbc-dev/lib/python2.6/site-packages/pylal/ligolw_sqlutils.py&quot;, line 23, in &lt;module&gt;
    from glue.ligolw import dbtables
  File &quot;/home/amber.lenon/pycbc-dev/lib/python2.6/site-packages/glue/ligolw/dbtables.py&quot;, line 54, in &lt;module&gt;
    from . import lsctables
  File &quot;/home/amber.lenon/pycbc-dev/lib/python2.6/site-packages/glue/ligolw/lsctables.py&quot;, line 44, in &lt;module&gt;
    from lal import LIGOTimeGPS
ImportError: No module named lal
</pre></div>
</div>
<p>Of these options the workflow module will automatically add the following, which are unique for each job. <strong>DO NOT ADD THESE OPTIONS IN THE CONFIGURATION FILE</strong>.</p>
<ul class="simple">
<li>&#8211;input</li>
<li>&#8211;output</li>
</ul>
</div>
</div>
</div>
</div>


           </div>
          </div>
          <footer>
  
    <div class="rst-footer-buttons" role="navigation" aria-label="footer navigation">
      
        <a href="../pycbc.workflow.html" class="btn btn-neutral float-right" title="pycbc.workflow package" accesskey="n">Next <span class="fa fa-arrow-circle-right"></span></a>
      
      
        <a href="postprocprep.html" class="btn btn-neutral" title="The workflow postprocessing preparation module" accesskey="p"><span class="fa fa-arrow-circle-left"></span> Previous</a>
      
    </div>
  

  <hr/>

  <div role="contentinfo">
    <p>
        &copy; Copyright 2014, Alexander Nitz.
      Last updated on Apr 12, 2016.

    </p>
  </div>
  Built with <a href="http://sphinx-doc.org/">Sphinx</a> using a <a href="https://github.com/snide/sphinx_rtd_theme">theme</a> provided by <a href="https://readthedocs.org">Read the Docs</a>. 

</footer>

        </div>
      </div>

    </section>

  </div>
  


  

    <script type="text/javascript">
        var DOCUMENTATION_OPTIONS = {
            URL_ROOT:'../',
            VERSION:'0.1',
            COLLAPSE_INDEX:false,
            FILE_SUFFIX:'.html',
            HAS_SOURCE:  true
        };
    </script>
      <script type="text/javascript" src="../_static/jquery.js"></script>
      <script type="text/javascript" src="../_static/underscore.js"></script>
      <script type="text/javascript" src="../_static/doctools.js"></script>

  

  
  
    <script type="text/javascript" src="../_static/js/theme.js"></script>
  

  
  
  <script type="text/javascript">
      jQuery(function () {
          SphinxRtdTheme.StickyNav.enable();
      });
  </script>
   

</body>
</html>